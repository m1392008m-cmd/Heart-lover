<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù…ÙØ§Ø¬Ø£Ø© Ù„Ùƒ</title>
    <style>
        body {
            margin: 0; padding: 0; overflow-x: hidden;
            background: linear-gradient(-45deg, #004d00, #cc0000, #800000, #ff69b4, #ac7373);
            background-size: 400% 400%; animation: bg 15s infinite;
            font-family: 'Cairo', sans-serif; text-align: center; color: white;
        }
        @keyframes bg { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

        /* Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„ÙƒØ¨ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        #startScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 1000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .big-heart {
            font-size: 150px; cursor: pointer; animation: pulse 1.5s infinite;
            filter: drop-shadow(0 0 30px #ff69b4);
        }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.2);} 100% {transform: scale(1);} }
        .names-on-heart { position: absolute; font-size: 20px; font-weight: bold; pointer-events: none; color: white; text-shadow: 2px 2px 5px black; }

        /* Ø§Ù„Ù‚Ù„ÙˆØ¨ ÙˆØ§Ù„Ø´ÙØ§Ù‡ Ø§Ù„Ù…ØªØ·Ø§ÙŠØ±Ø© */
        .particle { position: fixed; bottom: -50px; z-index: 5; animation: fly 6s linear infinite; pointer-events: none; }
        @keyframes fly { to { transform: translateY(-110vh) rotate(360deg); opacity: 0; } }

        .content { display: none; padding: 20px; z-index: 10; position: relative; }
        #typewriter { font-size: 24px; font-weight: bold; margin: 20px; min-height: 50px; line-height: 1.6; }
        iframe { border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.5); width: 100%; max-width: 560px; height: 315px; }
        
        .back-btn {
            margin-top: 40px; padding: 10px 20px; background: white; color: #800000;
            border-radius: 20px; text-decoration: none; font-weight: bold; display: inline-block;
        }
    </style>
</head>
<body>

    <div id="startScreen">
        <div class="big-heart" onclick="startShow()">ğŸ’–</div>
        <div class="names-on-heart" id="heartNames"></div>
        <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ù„Ø¨ ÙŠØ§ Ù‚Ù…Ø±</p>
    </div>

    <div class="content" id="mainContent">
        <h2 id="toHeader"></h2>
        <div id="videoContainer"></div>
        <div id="typewriter"></div>
        <a href="index.html" class="back-btn">Ø§Ø¨Ø¹Øª Ø±Ø³Ø§Ù„Ø© Ù„Ø­Ø¨ÙŠØ¨Ùƒ ğŸ’Œ</a>
    </div>

        <script>
        // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø·
        const params = new URLSearchParams(window.location.search);
        const from = params.get('from') || "Ù…Ø­Ø¨Ùƒ";
        const to = params.get('to') || "Ø­Ø¨ÙŠØ¨ÙŠ";
        const msg = params.get('m') || "Ø£Ù†Øª Ø£ØºÙ„Ù‰ Ù…Ø§ ÙÙŠ Ø­ÙŠØ§ØªÙŠ";
        let video = params.get('v') || "";

        // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ù„Ø¨
        document.getElementById('heartNames').innerText = `${from} â¤ï¸ ${to}`;
        document.getElementById('toHeader').innerText = `Ø¥Ù„Ù‰: ${to} âœ¨`;

        function startShow() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            
            let videoArea = document.getElementById('videoContainer');
            
            // 1. Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø£ÙŠ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ
            if (video) {
                if (video.includes('youtube.com') || video.includes('youtu.be')) {
                    // ØªØ­ÙˆÙŠÙ„ Ø±Ø§Ø¨Ø· ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ø¹Ø§Ø¯ÙŠ Ù„Ø±Ø§Ø¨Ø· Embed Ø¹Ø´Ø§Ù† ÙŠØ´ØªØºÙ„ Ø¬ÙˆÙ‡ Ø§Ù„ØµÙØ­Ø©
                    let vidId = video.split('v=')[1]?.split('&')[0] || video.split('/').pop().split('?')[0];
                    videoArea.innerHTML = `<iframe src="https://www.youtube.com/embed/${vidId}?autoplay=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="width:100%; height:315px; border-radius:15px;"></iframe>`;
                } 
                else if (video.match(/\.(mp4|webm|ogg)$/) !== null) {
                    // Ù„Ùˆ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¨Ø§Ø´Ø± Ù„Ù…Ù„Ù ÙÙŠØ¯ÙŠÙˆ (Ø¨ÙŠØ®Ù„Øµ Ø¨Ù€ mp4 Ù…Ø«Ù„Ø§Ù‹)
                    videoArea.innerHTML = `<video width="100%" height="315" controls autoplay style="border-radius:15px; box-shadow: 0 0 20px rgba(0,0,0,0.5);"><source src="${video}" type="video/mp4">Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</video>`;
                } 
                else {
                    // Ù„Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ ØªØ§Ù†ÙŠ (ÙÙŠØ³Ø¨ÙˆÙƒØŒ ØªÙŠÙƒ ØªÙˆÙƒØŒ Ø£Ùˆ Ø±Ø§Ø¨Ø· Ø®Ø§Ø±Ø¬ÙŠ) Ø¨Ù†Ø­Ø§ÙˆÙ„ Ù†Ø¹Ø±Ø¶Ù‡ ÙƒÙ€ Frame
                    videoArea.innerHTML = `<iframe src="${video}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="width:100%; height:315px; border-radius:15px;"></iframe>`;
                }
            }

            // Ø¨Ø¯Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø­Ø±Ù Ø­Ø±Ù Ø¨Ø´ÙƒÙ„ Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠ
            typeWriter(msg, 0);
            
            // Ø¨Ø¯Ø¡ ØªØ·Ø§ÙŠØ± Ø§Ù„Ù‚Ù„ÙˆØ¨ ÙˆØ§Ù„Ø´ÙØ§Ù‡
            setInterval(createParticle, 300);
        }

        function typeWriter(text, i) {
            if (i < text.length) {
                // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù†ÙŠÙˆÙ„Ø§ÙŠÙ† \n Ø¨Ø¨Ø±ÙŠÙƒ <br> Ø¹Ø´Ø§Ù† Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ ÙŠÙØ¶Ù„ Ù…Ø¸Ø¨ÙˆØ·
                let char = text.charAt(i);
                document.getElementById("typewriter").innerHTML += (char === '\n' ? '<br>' : char);
                setTimeout(() => typeWriter(text, i + 1), 70); // Ø§Ù„Ø³Ø±Ø¹Ø© Ù‡Ù†Ø§ 70 Ø¹Ø´Ø§Ù† ØªÙƒÙˆÙ† Ø³ÙŠÙ†Ù…Ø§Ø¦ÙŠØ© Ø£ÙƒØªØ±
            }
        }

        function createParticle() {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = ['â¤ï¸', 'ğŸ’‹', 'ğŸ’–'][Math.floor(Math.random()*3)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.fontSize = Math.random() * 20 + 20 + 'px';
            p.style.opacity = Math.random();
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 6000);
        }
    </script>

</body>
</html>
